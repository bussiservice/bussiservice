<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>David</title>

<style>
body {
    margin: 0;
    overflow: hidden;
    background: #d8d3c8;
    cursor: none;
    transition: background 0.5s ease;
}

/* Custom Cursor */
.cursor {
    position: fixed;
    font-size: 18px;
    pointer-events: none;
    z-index: 1000;
    transition: transform 0.2s ease;
}

.pulse {
    animation: pulse 0.8s infinite alternate;
}

@keyframes pulse {
    from { transform: scale(1); }
    to { transform: scale(1.6); }
}

/* Grid */
.grid {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    grid-auto-rows: 180px;
}

/* Flower */
.flower {
    width: 140px;
    height: 140px;
    margin: auto;
    animation: spin 10s linear infinite;
    transition: transform 0.3s ease;
}

.flower:hover {
    transform: scale(1.15);
}

.disco-flower {
    box-shadow: 0 0 20px rgba(255, 0, 255, 0.8);
    filter: brightness(1.3);
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Disco Mode */
.disco {
    animation: bgFlash 1s infinite;
}

@keyframes bgFlash {
    0% { background: black; }
    25% { background: #ff00ff; }
    50% { background: #00ffff; }
    75% { background: #ffff00; }
    100% { background: black; }
}

.disco .flower {
    animation: dance 0.4s infinite alternate, spin 3s linear infinite;
}

@keyframes dance {
    from { transform: rotate(-15deg) scale(1); }
    to { transform: rotate(15deg) scale(1.3); }
}

/* Popup */
.popup {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
}

.popup-content {
    background: white;
    padding: 40px;
    border-radius: 30px;
    text-align: center;
    font-family: Arial, sans-serif;
    font-size: 24px;
    position: relative;
}

.close {
    position: absolute;
    top: 10px;
    right: 20px;
    cursor: pointer;
}

.btn {
    margin: 20px;
    padding: 12px 30px;
    border: none;
    border-radius: 30px;
    font-size: 18px;
    cursor: pointer;
}

.yes { background: hotpink; color: white; }
.no { background: lightgray; }

.heart {
    position: fixed;
    color: hotpink;
    font-size: 24px;
    animation: floatUp 3s linear forwards;
}

@keyframes floatUp {
    from { transform: translateY(0); opacity:1;}
    to { transform: translateY(-300px); opacity:0;}
}
</style>
</head>
<body>

<div class="cursor" id="cursor">âœ–</div>
<div class="grid" id="grid"></div>

<div class="popup" id="popup" onclick="closePopupOutside(event)">
    <div class="popup-content">
        <div class="close" onclick="closePopup()">âœ–</div>
        <div id="question">
            Liebster David, mÃ¶chtest du 1000 Bussis annehmen?
        </div>
        <button class="btn yes" onclick="sayYes()">Ja ðŸ’–</button>
        <button class="btn no" id="noBtn">Nein</button>
    </div>
</div>

<audio id="discoSound" loop>
<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mp3">
</audio>

<script>
const grid = document.getElementById("grid");
const cursor = document.getElementById("cursor");
const popup = document.getElementById("popup");
const discoSound = document.getElementById("discoSound");
let discoActive = false;

/* Cursor follows mouse */
document.addEventListener("mousemove", e => {
    cursor.style.left = e.clientX + "px";
    cursor.style.top = e.clientY + "px";
});

function createFlower(color, centerColor) {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 200 200");
    svg.classList.add("flower");

    for(let i=0;i<8;i++){
        const petal = document.createElementNS("http://www.w3.org/2000/svg","ellipse");
        petal.setAttribute("cx",100);
        petal.setAttribute("cy",50);
        petal.setAttribute("rx",30);
        petal.setAttribute("ry",60);
        petal.setAttribute("fill",color);
        petal.setAttribute("transform","rotate("+(i*45)+" 100 100)");
        svg.appendChild(petal);
    }

    const center = document.createElementNS("http://www.w3.org/2000/svg","circle");
    center.setAttribute("cx",100);
    center.setAttribute("cy",100);
    center.setAttribute("r",30);
    center.setAttribute("fill",centerColor);
    svg.appendChild(center);

    return svg;
}

const colors = [
    ["#f48c5e","#ffffff"],
    ["#b6d96c","#f48c5e"],
    ["#f54287","#27c4c2"],
    ["#e2c93b","#6c5ce7"],
    ["#27c4c2","#e2c93b"],
    ["#6c5ce7","#ffffff"]
];

for(let i=0;i<36;i++){
    const combo = colors[i % colors.length];
    const flower = createFlower(combo[0], combo[1]);

    /* Jede dritte Blume â†’ Popup */
    if((i+1) % 3 === 0){
        flower.addEventListener("mouseenter", ()=>{
            if(!discoActive) cursor.innerHTML="â¤";
        });
        flower.addEventListener("mouseleave", ()=>{
            if(!discoActive) cursor.innerHTML="âœ–";
        });
        flower.addEventListener("click", ()=>{
            popup.style.display="flex";
        });
    }

    /* Disco-Blume (in der Mitte) */
    if(i === 13){
        flower.classList.add("disco-flower");
        flower.addEventListener("click", ()=>{
            discoActive = !discoActive;
            document.body.classList.toggle("disco");

            if(discoActive){
                cursor.innerHTML="â¤";
                cursor.classList.add("pulse");
                discoSound.play();
            } else {
                cursor.innerHTML="âœ–";
                cursor.classList.remove("pulse");
                discoSound.pause();
                discoSound.currentTime = 0;
            }
        });
    }

    grid.appendChild(flower);
}

/* Popup schlieÃŸen */
function closePopup(){
    popup.style.display="none";
}

function closePopupOutside(event){
    if(event.target === popup){
        popup.style.display="none";
    }
}

/* Nein-Button bewegt sich */
const noBtn = document.getElementById("noBtn");
noBtn.addEventListener("mouseover",()=>{
    noBtn.style.position="absolute";
    noBtn.style.left=Math.random()*300+"px";
    noBtn.style.top=Math.random()*200+"px";
});

/* Ja-Aktion */
function sayYes(){
    document.getElementById("question").innerHTML="1000 Bussis kommen sofort ðŸ’•";

    for(let i=0;i<40;i++){
        const heart=document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML="â¤";
        heart.style.left=Math.random()*window.innerWidth+"px";
        heart.style.top=Math.random()*window.innerHeight+"px";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),3000);
    }
}
</script>

</body>
</html>