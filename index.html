<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>David</title>

<style>
body {
    margin: 0;
    overflow: hidden;
    background: #d8d3c8;
    cursor: crosshair;
}

/* Grid */
.grid {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    grid-auto-rows: 180px;
}

/* Flower */
.flower {
    width: 140px;
    height: 140px;
    margin: auto;
    cursor: pointer;
    animation: spin 10s linear infinite;
    transition: transform 0.3s ease;
}

.flower:hover {
    transform: scale(1.15);
}

.flower.special {
    cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="red"/></svg>') 12 12, auto;
}

.flower.disco {
    cursor: grab;
}

.flower.disco-mode {
    animation: disco-spin 1s linear infinite !important;
}

body.disco {
    background: black;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes disco-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Popup */
.popup {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 100;
}

.popup-content {
    background: white;
    padding: 40px;
    border-radius: 30px;
    text-align: center;
    font-family: Arial, sans-serif;
    font-size: 26px;
    position: relative;
}

/* Buttons */
.btn {
    margin: 20px;
    padding: 12px 30px;
    border: none;
    border-radius: 30px;
    font-size: 18px;
    cursor: pointer;
}

.yes {
    background: hotpink;
    color: white;
}

.no {
    background: lightgray;
}

/* Hearts */
.heart {
    position: fixed;
    color: hotpink;
    font-size: 24px;
    animation: floatUp 3s linear forwards;
}

@keyframes floatUp {
    from { transform: translateY(0); opacity:1;}
    to { transform: translateY(-300px); opacity:0;}
}
</style>
</head>
<body>

<div class="grid" id="grid"></div>

<div class="popup" id="popup">
    <div class="popup-content">
        <div id="question">Liebster David, mÃ¶chtest du 1000 Bussis annehmen?</div>
        <button class="btn yes" onclick="sayYes()">Ja ðŸ’–</button>
        <button class="btn no" id="noBtn">Nein</button>
    </div>
</div>

<audio id="music" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
</audio>

<script>
const grid = document.getElementById("grid");

/* Exact flower shapes */
function createFlower(color, centerColor, type) {
    const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svg.setAttribute("viewBox", "0 0 200 200");
    svg.classList.add("flower");

    if(type === 1) {
        for(let i=0;i<8;i++){
            const petal = document.createElementNS("http://www.w3.org/2000/svg","ellipse");
            petal.setAttribute("cx",100);
            petal.setAttribute("cy",50);
            petal.setAttribute("rx",30);
            petal.setAttribute("ry",60);
            petal.setAttribute("fill",color);
            petal.setAttribute("transform","rotate("+(i*45)+" 100 100)");
            svg.appendChild(petal);
        }
    }

    if(type === 2) {
        for(let i=0;i<6;i++){
            const petal = document.createElementNS("http://www.w3.org/2000/svg","circle");
            petal.setAttribute("cx",100 + 50*Math.cos(i*60*Math.PI/180));
            petal.setAttribute("cy",100 + 50*Math.sin(i*60*Math.PI/180));
            petal.setAttribute("r",40);
            petal.setAttribute("fill",color);
            svg.appendChild(petal);
        }
    }

    const center = document.createElementNS("http://www.w3.org/2000/svg","circle");
    center.setAttribute("cx",100);
    center.setAttribute("cy",100);
    center.setAttribute("r",30);
    center.setAttribute("fill",centerColor);
    svg.appendChild(center);

    return svg;
}

/* Colors like screenshot */
const combinations = [
    ["#f48c5e","#ffffff",1],
    ["#b6d96c","#f48c5e",2],
    ["#f54287","#27c4c2",2],
    ["#e2c93b","#6c5ce7",2],
    ["#27c4c2","#e2c93b",1],
    ["#6c5ce7","#ffffff",2]
];

for(let i=0;i<36;i++){
    const combo = combinations[i % combinations.length];
    const flower = createFlower(combo[0], combo[1], combo[2]);
    if(i % 3 === 2){
        flower.classList.add("special");
        flower.addEventListener("click",()=>{
            document.getElementById("popup").style.display="flex";
            document.getElementById("music").play();
        });
    }
    if(i === 0){
        flower.classList.add("disco");
        flower.addEventListener("click",()=>{
            if (document.body.classList.contains("disco")) {
                document.body.classList.remove("disco");
                const allFlowers = document.querySelectorAll(".flower");
                allFlowers.forEach(f => f.classList.remove("disco-mode"));
            } else {
                document.body.classList.add("disco");
                const allFlowers = document.querySelectorAll(".flower");
                allFlowers.forEach(f => f.classList.add("disco-mode"));
            }
        });
    }
    grid.appendChild(flower);
}

/* Popup schlieÃŸbar */
const popup = document.getElementById("popup");
popup.addEventListener("click", (e) => {
    if(e.target === popup) {
        popup.style.display = "none";
    }
});

/* Moving No button */
const noBtn = document.getElementById("noBtn");
noBtn.addEventListener("mouseover",()=>{
    noBtn.style.position="absolute";
    noBtn.style.left=Math.random()*300+"px";
    noBtn.style.top=Math.random()*200+"px";
});

/* Yes action */
function sayYes(){
    document.getElementById("question").innerHTML="Juhu ðŸ’•";
    for(let i=0;i<20;i++){
        const heart=document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML="â¤";
        heart.style.left=Math.random()*window.innerWidth+"px";
        heart.style.top=Math.random()*window.innerHeight+"px";
        document.body.appendChild(heart);
        setTimeout(()=>heart.remove(),3000);
    }
}
</script>

</body>
</html>